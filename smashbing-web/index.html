<html>

<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
</head>

<body>
    <canvas id="game" width="64" height="64" style="width: 256px; height: 256px;"></canvas>
    <script src="smashbing_web.js"></script>
    <script>
        delete WebAssembly.instantiateStreaming;

        let gameCanvas = document.getElementById("game");
        let ctx = gameCanvas.getContext("2d");
        var game;

        function draw_rect(x, y, w, h, c) {
            console.log("rendering: ", x, y, w, h, c);
            ctx.fillStyle = c;
            ctx.fillRect(x, y, w, h);
        }

        const { EmbeddedGame } = wasm_bindgen;

        function run() {
            game = new EmbeddedGame();
        };

        wasm_bindgen("./smashbing_web_bg.wasm")
            .then(run).catch(console.error);
    </script>
</body>

</html>